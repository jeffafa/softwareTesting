<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0070)http://homepages.cwi.nl/~jve/courses/15/testing/lectures/Lecture5.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta name="generator" content="pandoc">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="./Lecture5_files/buttondown.css" type="text/css">
  <script src="./Lecture5_files/MathJax.js" type="text/javascript"></script>
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?rev=2.6.0') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?rev=2.6.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.6-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?rev=2.6.0') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<h1 id="lecture-5-sudoku-problem-solving-and-problem-generation">Lecture 5: Sudoku Problem Solving and Problem Generation</h1>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">module</span> <span class="dt">Lecture5</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> <span class="kw">where</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Data.List</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">System.Random</span></code></pre></div>
<hr>
<p>This page documents the implementation of a Sudoku puzzle solver, starting from a more or less formal specification, using constraint resolution and depth first tree search.</p>
<p>As an aside, we will look at <em>search trees</em> and at the abstract representation of <em>search</em>. We will discuss depth first versus breadth first search algorithms.</p>
<p>Next, a random generator for Sudoku problems is constructed, by randomly deleting values from a randomly generated Sudoku grid.</p>
<p>The Sudoku setting will give us ample opportunity for specification and testing, and for discussing the choice of appropriate datatypes.</p>
<hr>
<p><strong>Specifying Sudoku Solving</strong></p>
<p>A Sudoku is a <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" role="math" style="width: 2.37em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.309em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1002.25em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-2"><span class="mn" id="MathJax-Span-3" style="font-family: MathJax_Main;">9</span><span class="mo" id="MathJax-Span-4" style="font-family: MathJax_Main; padding-left: 0.246em;">×</span><span class="mn" id="MathJax-Span-5" style="font-family: MathJax_Main; padding-left: 0.246em;">9</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>9</mn><mo>×</mo><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-1">9 \times 9</script></span> matrix of numbers in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-6" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-7"><span class="mo" id="MathJax-Span-8" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-9" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-10" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-11" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-12" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-13" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-14" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">\{ 1, \ldots, 9 \}</script></span>, possibly including blanks, satisfying certain constraints. A <em>Sudoku problem</em> is a Sudoku containing blanks, but otherwise satisfying the Sudoku constraints. A Sudoku solver transforms the problem into a solution.</p>
<hr>
<p>If declarative specification is to be taken seriously, all there is to solving Sudokus is <em>specifying what a Sudoku problem is</em>. A Sudoku is a <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-15" role="math" style="width: 2.37em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.309em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1002.25em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-16"><span class="mn" id="MathJax-Span-17" style="font-family: MathJax_Main;">9</span><span class="mo" id="MathJax-Span-18" style="font-family: MathJax_Main; padding-left: 0.246em;">×</span><span class="mn" id="MathJax-Span-19" style="font-family: MathJax_Main; padding-left: 0.246em;">9</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>9</mn><mo>×</mo><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-3">9 \times 9</script></span> matrix of numbers in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-20" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-21"><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-23" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-24" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-25" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-26" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-27" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-28" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-4">\{ 1, \ldots, 9 \}</script></span> satisfying the following constraints:</p>
<ul>
<li><p>Every <em>row</em> should contain each number in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-29" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-30"><span class="mo" id="MathJax-Span-31" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-32" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-33" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-34" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-35" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-36" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-5">\{ 1, \ldots, 9 \}</script></span></p></li>
<li><p>Every <em>column</em> should contain each number in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-38" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-39"><span class="mo" id="MathJax-Span-40" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-41" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-42" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-43" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-44" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-45" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-46" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-6">\{ 1, \ldots, 9 \}</script></span></p></li>
<li><p>Every <em>subgrid</em> <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-47" role="math" style="width: 1.884em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1001.7em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-48"><span class="mo" id="MathJax-Span-49" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-51" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-52" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span><span class="mo" id="MathJax-Span-53" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-7">[i,j]</script></span> with <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-54" role="math" style="width: 1.338em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.277em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.28em 2.491em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-57" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>,</mo><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">i, j</script></span> ranging over <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;1..3&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-59" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-60"><span class="mn" id="MathJax-Span-61" style="font-family: MathJax_Main;">1..3</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1..3</mn></math></span></span><script type="math/tex" id="MathJax-Element-9">1..3</script></span>, <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;4..6&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-62" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-63"><span class="mn" id="MathJax-Span-64" style="font-family: MathJax_Main;">4..6</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4..6</mn></math></span></span><script type="math/tex" id="MathJax-Element-10">4..6</script></span> and <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;7..9&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-65" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-66"><span class="mn" id="MathJax-Span-67" style="font-family: MathJax_Main;">7..9</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>7..9</mn></math></span></span><script type="math/tex" id="MathJax-Element-11">7..9</script></span> should contain each number in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-68" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-69"><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-71" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-72" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-73" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-74" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-75" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-76" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-12">\{1, \ldots, 9 \}</script></span>.</p></li>
</ul>
<p>A Sudoku <em>problem</em> is a partial Sudoku matrix (a list of values in the matrix). A <em>solution</em> to a Sudoku problem is a complete extension of the problem, satisfying the Sudoku constraints.</p>
<p>A partial Sudoku should satisfy the following constraints:</p>
<ul>
<li><p>The values in every <em>row</em> should be in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-77" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-78"><span class="mo" id="MathJax-Span-79" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-80" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-81" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-82" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-83" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-84" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-85" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-13">\{ 1, \ldots, 9 \}</script></span>, and should all be different.</p></li>
<li><p>The values in every <em>column</em> should be in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-86" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-87"><span class="mo" id="MathJax-Span-88" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-89" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-90" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-91" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-92" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-93" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-94" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-14">\{ 1, \ldots, 9 \}</script></span>, and should all be different.</p></li>
<li><p>The values in every <em>subgrid</em> <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-95" role="math" style="width: 1.884em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1001.7em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-96"><span class="mo" id="MathJax-Span-97" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-99" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span><span class="mo" id="MathJax-Span-101" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-15">[i,j]</script></span> with <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-102" role="math" style="width: 1.338em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.277em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.28em 2.491em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-103"><span class="mi" id="MathJax-Span-104" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-105" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-106" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>,</mo><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-16">i, j</script></span> ranging over <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;1..3&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-107" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-108"><span class="mn" id="MathJax-Span-109" style="font-family: MathJax_Main;">1..3</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1..3</mn></math></span></span><script type="math/tex" id="MathJax-Element-17">1..3</script></span>, <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;4..6&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-110" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-111"><span class="mn" id="MathJax-Span-112" style="font-family: MathJax_Main;">4..6</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4..6</mn></math></span></span><script type="math/tex" id="MathJax-Element-18">4..6</script></span> and <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;7..9&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-113" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-114"><span class="mn" id="MathJax-Span-115" style="font-family: MathJax_Main;">7..9</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>7..9</mn></math></span></span><script type="math/tex" id="MathJax-Element-19">7..9</script></span> should be in <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;{&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mo fence=&quot;false&quot; stretchy=&quot;false&quot;&gt;}&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-116" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-117"><span class="mo" id="MathJax-Span-118" style="font-family: MathJax_Main;">{</span><span class="mn" id="MathJax-Span-119" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-120" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-121" style="font-family: MathJax_Main; padding-left: 0.185em;">…</span><span class="mo" id="MathJax-Span-122" style="font-family: MathJax_Main; padding-left: 0.185em;">,</span><span class="mn" id="MathJax-Span-123" style="font-family: MathJax_Main; padding-left: 0.185em;">9</span><span class="mo" id="MathJax-Span-124" style="font-family: MathJax_Main;">}</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9</mn><mo fence="false" stretchy="false">}</mo></math></span></span><script type="math/tex" id="MathJax-Element-20">\{1, \ldots, 9 \}</script></span>, and should all be different.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">       <span class="fu">+-------+-------+-------+</span>   <span class="fu">+-------+-------+-------+</span>
       <span class="fu">|</span> <span class="dv">5</span> <span class="dv">3</span>   <span class="fu">|</span>   <span class="dv">7</span>   <span class="fu">|</span>       <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">4</span> <span class="fu">|</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="fu">|</span> <span class="dv">9</span> <span class="dv">1</span> <span class="dv">2</span> <span class="fu">|</span>
       <span class="fu">|</span> <span class="dv">6</span>     <span class="fu">|</span> <span class="dv">1</span> <span class="dv">9</span> <span class="dv">5</span> <span class="fu">|</span>       <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">2</span> <span class="fu">|</span> <span class="dv">1</span> <span class="dv">9</span> <span class="dv">5</span> <span class="fu">|</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">8</span> <span class="fu">|</span>
       <span class="fu">|</span>   <span class="dv">9</span> <span class="dv">8</span> <span class="fu">|</span>       <span class="fu">|</span>   <span class="dv">6</span>   <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">1</span> <span class="dv">9</span> <span class="dv">8</span> <span class="fu">|</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">2</span> <span class="fu">|</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="fu">|</span>
       <span class="fu">+-------+-------+-------+</span>   <span class="fu">+-------+-------+-------+</span>
       <span class="fu">|</span> <span class="dv">8</span>     <span class="fu">|</span>   <span class="dv">6</span>   <span class="fu">|</span>     <span class="dv">3</span> <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">8</span> <span class="dv">5</span> <span class="dv">9</span> <span class="fu">|</span> <span class="dv">7</span> <span class="dv">6</span> <span class="dv">1</span> <span class="fu">|</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">3</span> <span class="fu">|</span>
       <span class="fu">|</span> <span class="dv">4</span>     <span class="fu">|</span> <span class="dv">8</span>   <span class="dv">3</span> <span class="fu">|</span>     <span class="dv">1</span> <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">6</span> <span class="fu">|</span> <span class="dv">8</span> <span class="dv">5</span> <span class="dv">3</span> <span class="fu">|</span> <span class="dv">7</span> <span class="dv">9</span> <span class="dv">1</span> <span class="fu">|</span>
       <span class="fu">|</span> <span class="dv">7</span>     <span class="fu">|</span>   <span class="dv">2</span>   <span class="fu">|</span>     <span class="dv">6</span> <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">7</span> <span class="dv">1</span> <span class="dv">3</span> <span class="fu">|</span> <span class="dv">9</span> <span class="dv">2</span> <span class="dv">4</span> <span class="fu">|</span> <span class="dv">8</span> <span class="dv">5</span> <span class="dv">6</span> <span class="fu">|</span>
       <span class="fu">+-------+-------+-------+</span>   <span class="fu">+-------+-------+-------+</span>
       <span class="fu">|</span>   <span class="dv">6</span>   <span class="fu">|</span>       <span class="fu">|</span> <span class="dv">2</span> <span class="dv">8</span>   <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">9</span> <span class="dv">6</span> <span class="dv">1</span> <span class="fu">|</span> <span class="dv">5</span> <span class="dv">3</span> <span class="dv">7</span> <span class="fu">|</span> <span class="dv">2</span> <span class="dv">8</span> <span class="dv">4</span> <span class="fu">|</span>
       <span class="fu">|</span>       <span class="fu">|</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">9</span> <span class="fu">|</span>     <span class="dv">5</span> <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">2</span> <span class="dv">8</span> <span class="dv">7</span> <span class="fu">|</span> <span class="dv">4</span> <span class="dv">1</span> <span class="dv">9</span> <span class="fu">|</span> <span class="dv">6</span> <span class="dv">3</span> <span class="dv">5</span> <span class="fu">|</span>
       <span class="fu">|</span>       <span class="fu">|</span>   <span class="dv">8</span>   <span class="fu">|</span>   <span class="dv">7</span> <span class="dv">9</span> <span class="fu">|</span>   <span class="fu">|</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="fu">|</span> <span class="dv">2</span> <span class="dv">8</span> <span class="dv">6</span> <span class="fu">|</span> <span class="dv">1</span> <span class="dv">7</span> <span class="dv">9</span> <span class="fu">|</span>
       <span class="fu">+-------+-------+-------+</span>   <span class="fu">+-------+-------+-------+</span></code></pre></div>
<p>Here is an example problem, with a solution. This is the format we are going to use for display.</p>
<hr>
<p><strong>Sudoku constraints as injectivity requirements</strong></p>
<p>To express the Sudoku constraints, we have to be able to express the property that a function is <em>injective</em> (or: <em>one-to-one</em>, or: an <em>injection</em>).</p>
<p>A function <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;Y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-125" role="math" style="width: 4.857em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.675em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.68em 2.491em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-126"><span class="mi" id="MathJax-Span-127" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-128" style="font-family: MathJax_Main; padding-left: 0.306em;">:</span><span class="mi" id="MathJax-Span-129" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-130" style="font-family: MathJax_Main; padding-left: 0.306em;">→</span><span class="mi" id="MathJax-Span-131" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.185em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo>:</mo><mi>X</mi><mo stretchy="false">→</mo><mi>Y</mi></math></span></span><script type="math/tex" id="MathJax-Element-21">f: X \to Y</script></span> is an injection if it preserves distinctions: if <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2260;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-132" role="math" style="width: 3.462em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.34em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1003.34em 2.612em -999.997em); top: -2.181em; left: 0.003em;"><span class="mrow" id="MathJax-Span-133"><span class="msubsup" id="MathJax-Span-134"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-135" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-136" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-137" style="font-family: MathJax_Main; padding-left: 0.306em;">≠</span><span class="msubsup" id="MathJax-Span-138" style="padding-left: 0.306em;"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-139" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-140" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.187em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mn>1</mn></msub><mo>≠</mo><msub><mi>x</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-22">x_1 \neq x_2</script></span> then <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2260;&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-141" role="math" style="width: 6.192em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.01em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1005.89em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-142"><span class="mi" id="MathJax-Span-143" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-144" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-145"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-146" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-147" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-148" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-149" style="font-family: MathJax_Main; padding-left: 0.306em;">≠</span><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-151" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-152"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-153" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-154" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-155" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>≠</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-23">f(x_1) \neq f(x_2)</script></span>.</p>
<p>Equivalently: a function <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;Y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-156" role="math" style="width: 4.857em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.675em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.68em 2.491em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-157"><span class="mi" id="MathJax-Span-158" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-159" style="font-family: MathJax_Main; padding-left: 0.306em;">:</span><span class="mi" id="MathJax-Span-160" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-161" style="font-family: MathJax_Main; padding-left: 0.306em;">→</span><span class="mi" id="MathJax-Span-162" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">Y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.185em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo>:</mo><mi>X</mi><mo stretchy="false">→</mo><mi>Y</mi></math></span></span><script type="math/tex" id="MathJax-Element-24">f: X \to Y</script></span> is injective if <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-163" role="math" style="width: 6.192em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.01em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1005.89em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-164"><span class="mi" id="MathJax-Span-165" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-166" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-167"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-168" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-169" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-170" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-171" style="font-family: MathJax_Main; padding-left: 0.306em;">=</span><span class="mi" id="MathJax-Span-172" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-173" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-174"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-175" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-176" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-177" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-25">f (x_1) = f(x_2)</script></span> implies that <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-178" role="math" style="width: 3.462em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.34em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.581em 1003.34em 2.491em -999.997em); top: -2.181em; left: 0.003em;"><span class="mrow" id="MathJax-Span-179"><span class="msubsup" id="MathJax-Span-180"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-181" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-182" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-183" style="font-family: MathJax_Main; padding-left: 0.306em;">=</span><span class="msubsup" id="MathJax-Span-184" style="padding-left: 0.306em;"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.401em 1000.55em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mi" id="MathJax-Span-185" style="font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -3.88em; left: 0.549em;"><span class="mn" id="MathJax-Span-186" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.187em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.184em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.753em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><msub><mi>x</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-26">x_1 = x_2</script></span>.</p>
<p>Thus, we can represent a Sudoku as a matrix <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-187" role="math" style="width: 2.43em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.37em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1002.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-188"><span class="mi" id="MathJax-Span-189" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-190" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-191" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-192" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-193" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span><span class="mo" id="MathJax-Span-194" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-27">f[i,j]</script></span>, satisfying:</p>
<ul>
<li>The members of each <em>row</em> should be all different. I.e., for every <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-195" role="math" style="width: 0.367em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.095em 1000.31em 2.127em -999.997em); top: -1.939em; left: 0.003em;"><span class="mrow" id="MathJax-Span-196"><span class="mi" id="MathJax-Span-197" style="font-family: MathJax_Math-italic;">i</span></span><span style="display: inline-block; width: 0px; height: 1.945em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-28">i</script></span>, the function <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x21A6;&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-198" role="math" style="width: 4.493em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.372em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.25em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-199"><span class="mi" id="MathJax-Span-200" style="font-family: MathJax_Math-italic;">j</span><span class="mo" id="MathJax-Span-201" style="font-family: MathJax_Main; padding-left: 0.306em;">↦</span><span class="mi" id="MathJax-Span-202" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-203" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-204" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-205" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-206" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span><span class="mo" id="MathJax-Span-207" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi><mo stretchy="false">↦</mo><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-29">j \mapsto f[i,j]</script></span> should be injective (one to one). I.e., the following list of values should not have duplicates.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">     [f [i,j] <span class="fu">|</span> j <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">9</span>] ]</code></pre></div>
<ul>
<li>The members of every <em>column</em> should be all different. I.e., for every <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-208" role="math" style="width: 0.428em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.428em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.095em 1000.43em 2.309em -999.997em); top: -1.939em; left: 0.003em;"><span class="mrow" id="MathJax-Span-209"><span class="mi" id="MathJax-Span-210" style="font-family: MathJax_Math-italic;">j</span></span><span style="display: inline-block; width: 0px; height: 1.945em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-30">j</script></span>, the function <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x21A6;&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-211" role="math" style="width: 4.433em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.311em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1004.19em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-212"><span class="mi" id="MathJax-Span-213" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-214" style="font-family: MathJax_Main; padding-left: 0.306em;">↦</span><span class="mi" id="MathJax-Span-215" style="font-family: MathJax_Math-italic; padding-left: 0.306em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mo" id="MathJax-Span-216" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-217" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-218" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-219" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span><span class="mo" id="MathJax-Span-220" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo stretchy="false">↦</mo><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-31">i \mapsto f[i,j]</script></span> should be injective (one to one). I.e., the following list of values should not have duplicates.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">      [f [i,j] <span class="fu">|</span> i <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">9</span>] ]</code></pre></div>
<ul>
<li>The members of every <em>subgrid</em> <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-221" role="math" style="width: 1.884em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.823em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1001.7em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-222"><span class="mo" id="MathJax-Span-223" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-224" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-225" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-226" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span><span class="mo" id="MathJax-Span-227" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-32">[i,j]</script></span> with <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-228" role="math" style="width: 1.338em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.277em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.28em 2.491em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-229"><span class="mi" id="MathJax-Span-230" style="font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-231" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-232" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">j</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>,</mo><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-33">i, j</script></span> ranging over <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;1..3&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-233" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-234"><span class="mn" id="MathJax-Span-235" style="font-family: MathJax_Main;">1..3</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1..3</mn></math></span></span><script type="math/tex" id="MathJax-Element-34">1..3</script></span>, <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;4..6&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-236" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-237"><span class="mn" id="MathJax-Span-238" style="font-family: MathJax_Main;">4..6</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4..6</mn></math></span></span><script type="math/tex" id="MathJax-Element-35">4..6</script></span> and <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;7..9&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-239" role="math" style="width: 1.641em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.581em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1001.52em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-240"><span class="mn" id="MathJax-Span-241" style="font-family: MathJax_Main;">7..9</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>7..9</mn></math></span></span><script type="math/tex" id="MathJax-Element-36">7..9</script></span> should be all different. I.e., the following list of values should not have duplicates, and similarly for the other subgrids.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">       [f [i,j] <span class="fu">|</span> i <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">3</span>], j <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">3</span>] ]</code></pre></div>
<p><strong>Implementing a Sudoku Solver</strong></p>
<p>The specification in the previous section suggests the following declarations:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Row</span>    <span class="fu">=</span> <span class="dt">Int</span> 
<span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Column</span> <span class="fu">=</span> <span class="dt">Int</span> 
<span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Value</span>  <span class="fu">=</span> <span class="dt">Int</span>
<span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Grid</span>   <span class="fu">=</span> [[<span class="dt">Value</span>]]
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> positions,<span class="ot"> values ::</span> [<span class="dt">Int</span>]
<span class="ot">&gt;</span> positions <span class="fu">=</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">9</span>]
<span class="ot">&gt;</span> values    <span class="fu">=</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">9</span>] 
<span class="ot">&gt;</span> 
<span class="ot">&gt; blocks ::</span> [[<span class="dt">Int</span>]]
<span class="ot">&gt;</span> blocks <span class="fu">=</span> [[<span class="dv">1</span><span class="fu">..</span><span class="dv">3</span>],[<span class="dv">4</span><span class="fu">..</span><span class="dv">6</span>],[<span class="dv">7</span><span class="fu">..</span><span class="dv">9</span>]]</code></pre></div>
<p>Showing Sudoku stuff: use <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-242" role="math" style="width: 0.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.549em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1000.49em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-243"><span class="mn" id="MathJax-Span-244" style="font-family: MathJax_Main;">0</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-37">0</script></span> for a blank slot, so show <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-245" role="math" style="width: 0.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.549em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1000.49em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-246"><span class="mn" id="MathJax-Span-247" style="font-family: MathJax_Main;">0</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-38">0</script></span> as a blank. Showing a value:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; showVal ::</span> <span class="dt">Value</span> <span class="ot">-&gt;</span> <span class="dt">String</span>
<span class="ot">&gt;</span> showVal <span class="dv">0</span> <span class="fu">=</span> <span class="st">" "</span>
<span class="ot">&gt;</span> showVal d <span class="fu">=</span> show d</code></pre></div>
<p>Showing a row by sending it to the screen; not the type <code>IO()</code> for the result:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; showRow ::</span> [<span class="dt">Value</span>] <span class="ot">-&gt;</span> <span class="dt">IO</span>()
<span class="ot">&gt;</span> showRow [a1,a2,a3,a4,a5,a6,a7,a8,a9] <span class="fu">=</span> 
<span class="ot">&gt;</span>  <span class="kw">do</span>  putChar <span class="ch">'|'</span>         ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a1) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a2) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a3) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putChar <span class="ch">'|'</span>         ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a4) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a5) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a6) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putChar <span class="ch">'|'</span>         ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a7) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a8) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putStr (showVal a9) ; putChar <span class="ch">' '</span>
<span class="ot">&gt;</span>      putChar <span class="ch">'|'</span>         ; putChar <span class="ch">'\n'</span></code></pre></div>
<p>Showing a grid, i.e., a sequence of rows.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; showGrid ::</span> <span class="dt">Grid</span> <span class="ot">-&gt;</span> <span class="dt">IO</span>()
<span class="ot">&gt;</span> showGrid [as,bs,cs,ds,es,fs,gs,hs,is] <span class="fu">=</span>
<span class="ot">&gt;</span>  <span class="kw">do</span> putStrLn (<span class="st">"+-------+-------+-------+"</span>)
<span class="ot">&gt;</span>     showRow as; showRow bs; showRow cs
<span class="ot">&gt;</span>     putStrLn (<span class="st">"+-------+-------+-------+"</span>)
<span class="ot">&gt;</span>     showRow ds; showRow es; showRow fs
<span class="ot">&gt;</span>     putStrLn (<span class="st">"+-------+-------+-------+"</span>)
<span class="ot">&gt;</span>     showRow gs; showRow hs; showRow is
<span class="ot">&gt;</span>     putStrLn (<span class="st">"+-------+-------+-------+"</span>)</code></pre></div>
<p><strong>Sudoku Type</strong></p>
<p>Define a Sudoku as a function from positions to values</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Sudoku</span> <span class="fu">=</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> <span class="dt">Value</span></code></pre></div>
<p>Useful conversions:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; sud2grid ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">Grid</span>
<span class="ot">&gt;</span> sud2grid s <span class="fu">=</span> 
<span class="ot">&gt;</span>   [ [ s (r,c) <span class="fu">|</span> c <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">9</span>] ] <span class="fu">|</span> r <span class="ot">&lt;-</span> [<span class="dv">1</span><span class="fu">..</span><span class="dv">9</span>] ] 
<span class="ot">&gt;</span> 
<span class="ot">&gt; grid2sud ::</span> <span class="dt">Grid</span> <span class="ot">-&gt;</span> <span class="dt">Sudoku</span>
<span class="ot">&gt;</span> grid2sud gr <span class="fu">=</span> \ (r,c) <span class="ot">-&gt;</span> pos gr (r,c) 
<span class="ot">&gt;</span>   <span class="kw">where</span> 
<span class="ot">&gt;   pos ::</span> [[a]] <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> a 
<span class="ot">&gt;</span>   pos gr (r,c) <span class="fu">=</span> (gr <span class="fu">!!</span> (r<span class="fu">-</span><span class="dv">1</span>)) <span class="fu">!!</span> (c<span class="fu">-</span><span class="dv">1</span>)</code></pre></div>
<p><strong>Showing a Sudoku</strong></p>
<p>Show a Sudoku by displaying its grid:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; showSudoku ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">IO</span>()
<span class="ot">&gt;</span> showSudoku <span class="fu">=</span> showGrid <span class="fu">.</span> sud2grid</code></pre></div>
<p><strong>Picking the block of a position</strong></p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; bl ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> [<span class="dt">Int</span>]
<span class="ot">&gt;</span> bl x <span class="fu">=</span> concat <span class="fu">$</span> filter (elem x) blocks </code></pre></div>
<p>Picking the subgrid of a position in a Sudoku.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; subGrid ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> [<span class="dt">Value</span>]
<span class="ot">&gt;</span> subGrid s (r,c) <span class="fu">=</span> 
<span class="ot">&gt;</span>   [ s (r',c') <span class="fu">|</span> r' <span class="ot">&lt;-</span> bl r, c' <span class="ot">&lt;-</span> bl c ]</code></pre></div>
<p><strong>Free Values</strong></p>
<p>Free values are available values at open slot positions. Free in a sequence are all values that have not yet been used.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; freeInSeq ::</span> [<span class="dt">Value</span>] <span class="ot">-&gt;</span> [<span class="dt">Value</span>]
<span class="ot">&gt;</span> freeInSeq seq <span class="fu">=</span> values \\ seq </code></pre></div>
<p>Free in a row are all values not yet used in that row.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; freeInRow ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">Row</span> <span class="ot">-&gt;</span> [<span class="dt">Value</span>]
<span class="ot">&gt;</span> freeInRow s r <span class="fu">=</span> 
<span class="ot">&gt;</span>   freeInSeq [ s (r,i) <span class="fu">|</span> i <span class="ot">&lt;-</span> positions  ]</code></pre></div>
<p>Similarly for free in a column.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; freeInColumn ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">Column</span> <span class="ot">-&gt;</span> [<span class="dt">Value</span>]
<span class="ot">&gt;</span> freeInColumn s c <span class="fu">=</span> 
<span class="ot">&gt;</span>   freeInSeq [ s (i,c) <span class="fu">|</span> i <span class="ot">&lt;-</span> positions ]</code></pre></div>
<p>And for free in a subgrid.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; freeInSubgrid ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> [<span class="dt">Value</span>]
<span class="ot">&gt;</span> freeInSubgrid s (r,c) <span class="fu">=</span> freeInSeq (subGrid s (r,c))</code></pre></div>
<p><strong>The key notion</strong></p>
<p>The available values at a position are the values that are free in the row of that position, free in the column of that position, and free in the subgrid of that position.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; freeAtPos ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> [<span class="dt">Value</span>]
<span class="ot">&gt;</span> freeAtPos s (r,c) <span class="fu">=</span> 
<span class="ot">&gt;</span>   (freeInRow s r) 
<span class="ot">&gt;</span>    <span class="ot">`intersect`</span> (freeInColumn s c) 
<span class="ot">&gt;</span>    <span class="ot">`intersect`</span> (freeInSubgrid s (r,c)) </code></pre></div>
<p><strong>Injectivity</strong></p>
<p>A list of values is injective if each value occurs only once in the list:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; injective ::</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> injective xs <span class="fu">=</span> nub xs <span class="fu">==</span> xs</code></pre></div>
<p><strong>Injectivity Checks</strong></p>
<p>Check (the non-zero values on) the rows for injectivity.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; rowInjective ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">Row</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> rowInjective s r <span class="fu">=</span> injective vs <span class="kw">where</span> 
<span class="ot">&gt;</span>    vs <span class="fu">=</span> filter (<span class="fu">/=</span> <span class="dv">0</span>) [ s (r,i) <span class="fu">|</span> i <span class="ot">&lt;-</span> positions ]</code></pre></div>
<p>Check (the non-zero values on) the columns for injectivity.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; colInjective ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">Column</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> colInjective s c <span class="fu">=</span> injective vs <span class="kw">where</span> 
<span class="ot">&gt;</span>    vs <span class="fu">=</span> filter (<span class="fu">/=</span> <span class="dv">0</span>) [ s (i,c) <span class="fu">|</span> i <span class="ot">&lt;-</span> positions ]</code></pre></div>
<p>Check (the non-zero values on) the subgrids for injectivity.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; subgridInjective ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> subgridInjective s (r,c) <span class="fu">=</span> injective vs <span class="kw">where</span> 
<span class="ot">&gt;</span>    vs <span class="fu">=</span> filter (<span class="fu">/=</span> <span class="dv">0</span>) (subGrid s (r,c))</code></pre></div>
<p><strong>Consistency Check</strong> Combine the injectivity checks defined above.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; consistent ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> consistent s <span class="fu">=</span> and <span class="fu">$</span>
<span class="ot">&gt;</span>                [ rowInjective s r <span class="fu">|</span>  r <span class="ot">&lt;-</span> positions ]
<span class="ot">&gt;</span>                 <span class="fu">++</span>
<span class="ot">&gt;</span>                [ colInjective s c <span class="fu">|</span>  c <span class="ot">&lt;-</span> positions ]
<span class="ot">&gt;</span>                 <span class="fu">++</span>
<span class="ot">&gt;</span>                [ subgridInjective s (r,c) <span class="fu">|</span> 
<span class="ot">&gt;</span>                     r <span class="ot">&lt;-</span> [<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">7</span>], c <span class="ot">&lt;-</span> [<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">7</span>]]</code></pre></div>
<p><strong>Sudoku Extension</strong></p>
<p>Extend a Sudoku by filling in a value in a new position.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; extend ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> ((<span class="dt">Row</span>,<span class="dt">Column</span>),<span class="dt">Value</span>) <span class="ot">-&gt;</span> <span class="dt">Sudoku</span>
<span class="ot">&gt;</span> extend <span class="fu">=</span> update</code></pre></div>
<p>Our well-known update function:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; update ::</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> (a,b) <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> b 
<span class="ot">&gt;</span> update f (y,z) x <span class="fu">=</span> <span class="kw">if</span> x <span class="fu">==</span> y <span class="kw">then</span> z <span class="kw">else</span> f x </code></pre></div>
<p><strong>Search for a Sudoku Solution</strong></p>
<p>A Sudoku constraint is a list of possible values for a particular position.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Constraint</span> <span class="fu">=</span> (<span class="dt">Row</span>,<span class="dt">Column</span>,[<span class="dt">Value</span>])</code></pre></div>
<p>Nodes in the search tree are pairs consisting of a Sudoku and the list of all empty positions in it, together with possible values for those positions, according to the constraints imposed by the Sudoku.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">type</span> <span class="dt">Node</span> <span class="fu">=</span> (<span class="dt">Sudoku</span>,[<span class="dt">Constraint</span>])
<span class="ot">&gt;</span> 
<span class="ot">&gt; showNode ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> <span class="dt">IO</span>()
<span class="ot">&gt;</span> showNode <span class="fu">=</span> showSudoku <span class="fu">.</span> fst</code></pre></div>
<p><strong>Solution</strong></p>
<p>A Sudoku is solved if there are no more empty slots.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; solved  ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> solved <span class="fu">=</span> null <span class="fu">.</span> snd</code></pre></div>
<p><strong>Successors in the Search Tree</strong></p>
<p>The successors of a node are the nodes where the Sudoku gets extended at the next empty slot position on the list, using the values listed in the constraint for that position.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; extendNode ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> <span class="dt">Constraint</span> <span class="ot">-&gt;</span> [<span class="dt">Node</span>]
<span class="ot">&gt;</span> extendNode (s,constraints) (r,c,vs) <span class="fu">=</span> 
<span class="ot">&gt;</span>    [(extend s ((r,c),v),
<span class="ot">&gt;</span>      sortBy length3rd <span class="fu">$</span> 
<span class="ot">&gt;</span>          prune (r,c,v) constraints) <span class="fu">|</span> v <span class="ot">&lt;-</span> vs ]</code></pre></div>
<p><code>prune</code> removes the new value <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-248" role="math" style="width: 0.488em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.488em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.338em 1000.49em 2.127em -999.997em); top: -1.939em; left: 0.003em;"><span class="mrow" id="MathJax-Span-249"><span class="mi" id="MathJax-Span-250" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 1.945em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.566em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>v</mi></math></span></span><script type="math/tex" id="MathJax-Element-39">v</script></span> from the relevant constraints, given that <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-251" role="math" style="width: 0.488em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.488em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.338em 1000.49em 2.127em -999.997em); top: -1.939em; left: 0.003em;"><span class="mrow" id="MathJax-Span-252"><span class="mi" id="MathJax-Span-253" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 1.945em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.566em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>v</mi></math></span></span><script type="math/tex" id="MathJax-Element-40">v</script></span> now occupies position <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-254" role="math" style="width: 2.187em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.127em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1002.01em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-255"><span class="mo" id="MathJax-Span-256" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-257" style="font-family: MathJax_Math-italic;">r</span><span class="mo" id="MathJax-Span-258" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-259" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">c</span><span class="mo" id="MathJax-Span-260" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>r</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-41">(r,c)</script></span>. The definition of <code>prune</code> is given below.</p>
<p><strong>Put constraints that are easiest to solve first</strong></p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; length3rd ::</span> (a,b,[c]) <span class="ot">-&gt;</span> (a,b,[c]) <span class="ot">-&gt;</span> <span class="dt">Ordering</span>
<span class="ot">&gt;</span> length3rd (_,_,zs) (_,_,zs') <span class="fu">=</span> compare (length zs) (length zs')</code></pre></div>
<p><strong>Pruning</strong></p>
<p>Prune values that are no longer possible from constraint list, given a new guess <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-261" role="math" style="width: 3.219em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.098em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1002.98em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-262"><span class="mo" id="MathJax-Span-263" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-264" style="font-family: MathJax_Math-italic;">r</span><span class="mo" id="MathJax-Span-265" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-266" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">c</span><span class="mo" id="MathJax-Span-267" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-268" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">v</span><span class="mo" id="MathJax-Span-269" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>r</mi><mo>,</mo><mi>c</mi><mo>,</mo><mi>v</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-42">(r,c,v)</script></span> for the value of <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-270" role="math" style="width: 2.187em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.127em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1002.01em 2.552em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-271"><span class="mo" id="MathJax-Span-272" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-273" style="font-family: MathJax_Math-italic;">r</span><span class="mo" id="MathJax-Span-274" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-275" style="font-family: MathJax_Math-italic; padding-left: 0.185em;">c</span><span class="mo" id="MathJax-Span-276" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>r</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-43">(r,c)</script></span>.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; prune ::</span> (<span class="dt">Row</span>,<span class="dt">Column</span>,<span class="dt">Value</span>) 
<span class="ot">&gt;</span>       <span class="ot">-&gt;</span> [<span class="dt">Constraint</span>] <span class="ot">-&gt;</span> [<span class="dt">Constraint</span>]
<span class="ot">&gt;</span> prune _ [] <span class="fu">=</span> []
<span class="ot">&gt;</span> prune (r,c,v) ((x,y,zs)<span class="fu">:</span>rest)
<span class="ot">&gt;</span>   <span class="fu">|</span> r <span class="fu">==</span> x <span class="fu">=</span> (x,y,zs\\[v]) <span class="fu">:</span> prune (r,c,v) rest
<span class="ot">&gt;</span>   <span class="fu">|</span> c <span class="fu">==</span> y <span class="fu">=</span> (x,y,zs\\[v]) <span class="fu">:</span> prune (r,c,v) rest
<span class="ot">&gt;</span>   <span class="fu">|</span> sameblock (r,c) (x,y) <span class="fu">=</span> 
<span class="ot">&gt;</span>         (x,y,zs\\[v]) <span class="fu">:</span> prune (r,c,v) rest
<span class="ot">&gt;</span>   <span class="fu">|</span> otherwise <span class="fu">=</span> (x,y,zs) <span class="fu">:</span> prune (r,c,v) rest
<span class="ot">&gt;</span> 
<span class="ot">&gt; sameblock ::</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> sameblock (r,c) (x,y) <span class="fu">=</span> bl r <span class="fu">==</span> bl x <span class="fu">&amp;&amp;</span> bl c <span class="fu">==</span> bl y </code></pre></div>
<p><strong>Initialisation</strong></p>
<p>Success is indicated by return of a unit node <code>[n]</code>.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; initNode ::</span> <span class="dt">Grid</span> <span class="ot">-&gt;</span> [<span class="dt">Node</span>]
<span class="ot">&gt;</span> initNode gr <span class="fu">=</span> <span class="kw">let</span> s <span class="fu">=</span> grid2sud gr <span class="kw">in</span> 
<span class="ot">&gt;</span>               <span class="kw">if</span> (not <span class="fu">.</span> consistent) s <span class="kw">then</span> [] 
<span class="ot">&gt;</span>               <span class="kw">else</span> [(s, constraints s)]</code></pre></div>
<p>The open positions of a Sudoku are the positions with value <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-277" role="math" style="width: 0.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.549em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1000.49em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-278"><span class="mn" id="MathJax-Span-279" style="font-family: MathJax_Main;">0</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-44">0</script></span>.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; openPositions ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> [(<span class="dt">Row</span>,<span class="dt">Column</span>)]
<span class="ot">&gt;</span> openPositions s <span class="fu">=</span> [ (r,c) <span class="fu">|</span> r <span class="ot">&lt;-</span> positions,  
<span class="ot">&gt;</span>                             c <span class="ot">&lt;-</span> positions, 
<span class="ot">&gt;</span>                             s (r,c) <span class="fu">==</span> <span class="dv">0</span> ]</code></pre></div>
<p><strong>Sudoku constraints, in a useful order</strong></p>
<p>Put the constraints with the shortest lists of possible values first.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; constraints ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> [<span class="dt">Constraint</span>] 
<span class="ot">&gt;</span> constraints s <span class="fu">=</span> sortBy length3rd 
<span class="ot">&gt;</span>     [(r,c, freeAtPos s (r,c)) <span class="fu">|</span> 
<span class="ot">&gt;</span>                        (r,c) <span class="ot">&lt;-</span> openPositions s ]</code></pre></div>
<hr>
<p><strong>Aside: Search Trees</strong></p>
<p>Here is a datatype for trees with lists of branches:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">data</span> <span class="dt">Tree</span> a <span class="fu">=</span> <span class="dt">T</span> a [<span class="dt">Tree</span> a] <span class="kw">deriving</span> (<span class="dt">Eq</span>,<span class="dt">Ord</span>,<span class="dt">Show</span>)</code></pre></div>
<p>Here are some example trees:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> exmple1 <span class="fu">=</span> <span class="dt">T</span> <span class="dv">1</span> [<span class="dt">T</span> <span class="dv">2</span> [], <span class="dt">T</span> <span class="dv">3</span> []]
<span class="ot">&gt;</span> exmple2 <span class="fu">=</span> <span class="dt">T</span> <span class="dv">0</span> [exmple1,exmple1,exmple1]</code></pre></div>
<p>This gives:</p>
<pre><code> *Lecture5&gt; exmple1
 T 1 [T 2 [],T 3 []]
 *Lecture5&gt; exmple2
 T 0 [T 1 [T 2 [],T 3 []],
     T 1 [T 2 [],T 3 []],T 1 [T 2 [],T 3 []]]</code></pre>
<p><strong>Growing Trees</strong></p>
<p>If you have a step function of type <code>node -&gt; [node]</code> and a seed, you can grow a tree, as follows.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; grow ::</span> (node <span class="ot">-&gt;</span> [node]) <span class="ot">-&gt;</span> node <span class="ot">-&gt;</span> <span class="dt">Tree</span> node 
<span class="ot">&gt;</span> grow step seed <span class="fu">=</span> <span class="dt">T</span> seed (map (grow step) (step seed))</code></pre></div>
<pre><code>Lecture5&gt; grow  (\x -&gt; if x &lt; 2 then [x+1, x+1] else []) 0
T 0 [T 1 [T 2 [],T 2 []],T 1 [T 2 [],T 2 []]]</code></pre>
<p><strong>Tree Puzzle</strong></p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; count ::</span> <span class="dt">Tree</span> a <span class="ot">-&gt;</span> <span class="dt">Int</span> 
<span class="ot">&gt;</span> count (<span class="dt">T</span> _ ts) <span class="fu">=</span> <span class="dv">1</span> <span class="fu">+</span> sum (map count ts)</code></pre></div>
<p>Consider the following output:</p>
<pre><code>     *Lecture5&gt; count (grow  (\x -&gt; if x &lt; 2 then [x+1, x+1] else []) 0)
     7        </code></pre>
<p>Can you predict the value of the following:</p>
<pre><code>   count (grow  (\x -&gt; if x &lt; 6 then [x+1, x+1] else []) 0)</code></pre>
<p><strong>Explanation</strong></p>
<p>The tree grown by <code>(\x -&gt; if x &lt; 6 then [x+1, x+1] else []) 0</code> is a balanced binary branching tree of depth 6.</p>
<p>A balanced binary tree of depth <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-280" role="math" style="width: 0.671em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.61em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.338em 1000.61em 2.127em -999.997em); top: -1.939em; left: 0.003em;"><span class="mrow" id="MathJax-Span-281"><span class="mi" id="MathJax-Span-282" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 1.945em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.566em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-45">n</script></span> has <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-283" role="math" style="width: 2.916em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.794em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.217em 1002.73em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-284"><span class="msubsup" id="MathJax-Span-285"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.43em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mn" id="MathJax-Span-286" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -4.366em; left: 0.488em;"><span class="mi" id="MathJax-Span-287" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-288" style="font-family: MathJax_Main; padding-left: 0.246em;">−</span><span class="mn" id="MathJax-Span-289" style="font-family: MathJax_Main; padding-left: 0.246em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-46">2^n-1</script></span> internal nodes and <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-290" role="math" style="width: 1.095em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.035em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(0.064em 1001.04em 1.156em -999.997em); top: -0.968em; left: 0.003em;"><span class="mrow" id="MathJax-Span-291"><span class="msubsup" id="MathJax-Span-292"><span style="display: inline-block; position: relative; width: 0.974em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.43em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mn" id="MathJax-Span-293" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -4.366em; left: 0.488em;"><span class="mi" id="MathJax-Span-294" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 0.974em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>n</mi></msup></math></span></span><script type="math/tex" id="MathJax-Element-47">2^n</script></span> leaf nodes, which makes <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-295" role="math" style="width: 3.826em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.704em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.095em 1003.64em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-296"><span class="msubsup" id="MathJax-Span-297"><span style="display: inline-block; position: relative; width: 1.884em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.43em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mn" id="MathJax-Span-298" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -4.366em; left: 0.488em;"><span class="texatom" id="MathJax-Span-299"><span class="mrow" id="MathJax-Span-300"><span class="mi" id="MathJax-Span-301" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-302" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-303" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-304" style="font-family: MathJax_Main; padding-left: 0.246em;">−</span><span class="mn" id="MathJax-Span-305" style="font-family: MathJax_Main; padding-left: 0.246em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-48">2^{n+1}-1</script></span> nodes in total. For a balanced binary tree of depth <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-306" role="math" style="width: 0.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.549em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1000.49em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-307"><span class="mn" id="MathJax-Span-308" style="font-family: MathJax_Main;">6</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>6</mn></math></span></span><script type="math/tex" id="MathJax-Element-49">6</script></span> this gives <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mn&gt;7&lt;/mn&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;127&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-309" role="math" style="width: 5.768em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.586em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.095em 1005.59em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-310"><span class="msubsup" id="MathJax-Span-311"><span style="display: inline-block; position: relative; width: 0.913em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.43em 4.19em -999.997em); top: -4.002em; left: 0.003em;"><span class="mn" id="MathJax-Span-312" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span><span style="position: absolute; top: -4.366em; left: 0.488em;"><span class="mn" id="MathJax-Span-313" style="font-size: 70.7%; font-family: MathJax_Main;">7</span><span style="display: inline-block; width: 0px; height: 4.008em;"></span></span></span></span><span class="mo" id="MathJax-Span-314" style="font-family: MathJax_Main; padding-left: 0.246em;">−</span><span class="mn" id="MathJax-Span-315" style="font-family: MathJax_Main; padding-left: 0.246em;">1</span><span class="mo" id="MathJax-Span-316" style="font-family: MathJax_Main; padding-left: 0.306em;">=</span><span class="mn" id="MathJax-Span-317" style="font-family: MathJax_Main; padding-left: 0.306em;">127</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mn>7</mn></msup><mo>−</mo><mn>1</mn><mo>=</mo><mn>127</mn></math></span></span><script type="math/tex" id="MathJax-Element-50">2^7-1 = 127</script></span> nodes.</p>
<p><strong>Another Tree</strong></p>
<pre><code> *Lecture5&gt; grow (\ (x,y) -&gt; if x+y &lt; 10 then [(x,x+y),(x+y,y)] else []) (1,1)
 
 T (1,1) [T (1,2) [T (1,3) [T (1,4) [T (1,5) [T (1,6) 
 [T (1,7) [T (1,8) [T (1,9) [],T (9,8) []],T (8,7) []],
 T (7,6) []],T (6,5) []],T (5,4) [T (5,9) [],T (9,4) []]],
 T (4,3) [T (4,7) [],T (7,3) []]],T (3,2) [T (3,5) 
 [T (3,8) [],T (8,5) []],T (5,2) [T (5,7) [],T (7,2) 
 [T (7,9) [],T (9,2) []]]]],T (2,1) [T (2,3) [T (2,5) 
 [T (2,7) [T (2,9) [],T (9,7) []],T (7,5) []],T (5,3) 
 [T (5,8) [],T (8,3) []]],T (3,1) [T (3,4) [T (3,7) [],
 T (7,4) []],T (4,1) [T (4,5) [T (4,9) [],T (9,5) []],
 T (5,1) [T (5,6) [],T (6,1) [T (6,7) [],T (7,1) 
 [T (7,8) [],T (8,1) [T (8,9) [],T (9,1) []]]]]]]]]</code></pre>
<p><strong>Depth First Search</strong></p>
<p>The depth first search algorithm is completely standard. The goal property is used to end the search.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; search ::</span> (node <span class="ot">-&gt;</span> [node]) 
<span class="ot">&gt;</span>        <span class="ot">-&gt;</span> (node <span class="ot">-&gt;</span> <span class="dt">Bool</span>) <span class="ot">-&gt;</span> [node] <span class="ot">-&gt;</span> [node]
<span class="ot">&gt;</span> search children goal [] <span class="fu">=</span> []
<span class="ot">&gt;</span> search children goal (x<span class="fu">:</span>xs) 
<span class="ot">&gt;</span>   <span class="fu">|</span> goal x    <span class="fu">=</span> x <span class="fu">:</span> search children goal xs
<span class="ot">&gt;</span>   <span class="fu">|</span> otherwise <span class="fu">=</span> search children goal ((children x) <span class="fu">++</span> xs)</code></pre></div>
<p>This is a <em>generic algorithm for depth-first search</em>.</p>
<p>The third argument, of type <code>[node]</code>, gives the list of nodes that still have to be searched.</p>
<hr>
<p><strong>Understanding this ...</strong></p>
<p>Explain as clearly as you can:</p>
<ul>
<li>What does the first argument <code>children:: node -&gt; [node]</code> represent?</li>
<li>What does the second argument <code>goal :: node -&gt; Bool</code> represent?</li>
<li>Can you explain the <code>types</code> of these arguments?</li>
</ul>
<hr>
<p><strong>Depth first versus breadth first search</strong></p>
<p>Consider again the definition of the <code>search</code> function.</p>
<ul>
<li>What makes this a definition of depth-first search?</li>
<li>How can you change this into a definition of breadth-first search (where the tree is searched layer-by-layer)? Hint: a tiny change in the last line of the definition is enough.</li>
</ul>
<hr>
<p><strong>Pursuing the Search</strong></p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; solveNs ::</span> [<span class="dt">Node</span>] <span class="ot">-&gt;</span> [<span class="dt">Node</span>]
<span class="ot">&gt;</span> solveNs <span class="fu">=</span> search succNode solved 
<span class="ot">&gt;</span> 
<span class="ot">&gt; succNode ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> [<span class="dt">Node</span>]
<span class="ot">&gt;</span> succNode (s,[]) <span class="fu">=</span> []
<span class="ot">&gt;</span> succNode (s,p<span class="fu">:</span>ps) <span class="fu">=</span> extendNode (s,ps) p </code></pre></div>
<p><strong>Solving and showing the results</strong></p>
<p>This uses some monad operators: <code>fmap</code> and <code>sequence</code>.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; solveAndShow ::</span> <span class="dt">Grid</span> <span class="ot">-&gt;</span> <span class="dt">IO</span>[()]
<span class="ot">&gt;</span> solveAndShow gr <span class="fu">=</span> solveShowNs (initNode gr)
<span class="ot">&gt;</span> 
<span class="ot">&gt; solveShowNs ::</span> [<span class="dt">Node</span>] <span class="ot">-&gt;</span> <span class="dt">IO</span>[()]
<span class="ot">&gt;</span> solveShowNs <span class="fu">=</span> sequence <span class="fu">.</span> fmap showNode <span class="fu">.</span> solveNs</code></pre></div>
<p><strong>Examples</strong></p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; example1 ::</span> <span class="dt">Grid</span>
<span class="ot">&gt;</span> example1 <span class="fu">=</span> [[<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>],
<span class="ot">&gt;</span>             [<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>],
<span class="ot">&gt;</span>             [<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">5</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">9</span>]]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; example2 ::</span> <span class="dt">Grid</span>
<span class="ot">&gt;</span> example2 <span class="fu">=</span> [[<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>],
<span class="ot">&gt;</span>             [<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>],
<span class="ot">&gt;</span>             [<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">8</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">5</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">9</span>]]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; example3 ::</span> <span class="dt">Grid</span>
<span class="ot">&gt;</span> example3 <span class="fu">=</span> [[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">4</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">8</span>], 
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">7</span>],
<span class="ot">&gt;</span>             [<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>]]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; example4 ::</span> <span class="dt">Grid</span>
<span class="ot">&gt;</span> example4 <span class="fu">=</span> [[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>],
<span class="ot">&gt;</span>             [<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; example5 ::</span> <span class="dt">Grid</span>
<span class="ot">&gt;</span> example5 <span class="fu">=</span> [[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">8</span>,<span class="dv">0</span>],
<span class="ot">&gt;</span>             [<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">9</span>]]</code></pre></div>
<hr>
<p><strong>Sudoku Generation</strong></p>
<p>An empty node is a Sudoku function that assigns <span class="math inline"><span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-318" role="math" style="width: 0.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.549em; height: 0px; font-size: 103%;"><span style="position: absolute; clip: rect(1.277em 1000.49em 2.309em -999.997em); top: -2.121em; left: 0.003em;"><span class="mrow" id="MathJax-Span-319"><span class="mn" id="MathJax-Span-320" style="font-family: MathJax_Main;">0</span></span><span style="display: inline-block; width: 0px; height: 2.127em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left-width: 0px; border-left-style: solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-51">0</script></span> everywhere, together with the trivial constraints that forbid nothing.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; emptyN ::</span> <span class="dt">Node</span>
<span class="ot">&gt;</span> emptyN <span class="fu">=</span> (\ _ <span class="ot">-&gt;</span> <span class="dv">0</span>,constraints (\ _ <span class="ot">-&gt;</span> <span class="dv">0</span>))</code></pre></div>
<p>Get a random integer from the random generator:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; getRandomInt ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">Int</span>
<span class="ot">&gt;</span> getRandomInt n <span class="fu">=</span> getStdRandom (randomR (<span class="dv">0</span>,n))</code></pre></div>
<p>Pick a random member from a list; the empty list indicates failure.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; getRandomItem ::</span> [a] <span class="ot">-&gt;</span> <span class="dt">IO</span> [a]
<span class="ot">&gt;</span> getRandomItem [] <span class="fu">=</span> return []
<span class="ot">&gt;</span> getRandomItem xs <span class="fu">=</span> <span class="kw">do</span> n <span class="ot">&lt;-</span> getRandomInt maxi
<span class="ot">&gt;</span>                       return [xs <span class="fu">!!</span> n]
<span class="ot">&gt;</span>                    <span class="kw">where</span> maxi <span class="fu">=</span> length xs <span class="fu">-</span> <span class="dv">1</span></code></pre></div>
<p>Randomize a list.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; randomize ::</span> <span class="dt">Eq</span> a <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">IO</span> [a]
<span class="ot">&gt;</span> randomize xs <span class="fu">=</span> <span class="kw">do</span> y <span class="ot">&lt;-</span> getRandomItem xs 
<span class="ot">&gt;</span>                   <span class="kw">if</span> null y 
<span class="ot">&gt;</span>                     <span class="kw">then</span> return []
<span class="ot">&gt;</span>                     <span class="kw">else</span> <span class="kw">do</span> ys <span class="ot">&lt;-</span> randomize (xs\\y)
<span class="ot">&gt;</span>                             return (head y<span class="fu">:</span>ys)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; sameLen ::</span> <span class="dt">Constraint</span> <span class="ot">-&gt;</span> <span class="dt">Constraint</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> sameLen (_,_,xs) (_,_,ys) <span class="fu">=</span> length xs <span class="fu">==</span> length ys</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; getRandomCnstr ::</span> [<span class="dt">Constraint</span>] <span class="ot">-&gt;</span> <span class="dt">IO</span> [<span class="dt">Constraint</span>]
<span class="ot">&gt;</span> getRandomCnstr cs <span class="fu">=</span> getRandomItem (f cs) 
<span class="ot">&gt;</span>   <span class="kw">where</span> f [] <span class="fu">=</span> []
<span class="ot">&gt;</span>         f (x<span class="fu">:</span>xs) <span class="fu">=</span> takeWhile (sameLen x) (x<span class="fu">:</span>xs)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; rsuccNode ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> [<span class="dt">Node</span>]
<span class="ot">&gt;</span> rsuccNode (s,cs) <span class="fu">=</span> <span class="kw">do</span> xs <span class="ot">&lt;-</span> getRandomCnstr cs
<span class="ot">&gt;</span>                       <span class="kw">if</span> null xs 
<span class="ot">&gt;</span>                         <span class="kw">then</span> return []
<span class="ot">&gt;</span>                         <span class="kw">else</span> return 
<span class="ot">&gt;</span>                           (extendNode (s,cs\\xs) (head xs))</code></pre></div>
<p>Find a random solution.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; rsolveNs ::</span> [<span class="dt">Node</span>] <span class="ot">-&gt;</span> <span class="dt">IO</span> [<span class="dt">Node</span>]
<span class="ot">&gt;</span> rsolveNs ns <span class="fu">=</span> rsearch rsuccNode solved (return ns)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; rsearch ::</span> (node <span class="ot">-&gt;</span> <span class="dt">IO</span> [node]) 
<span class="ot">&gt;</span>             <span class="ot">-&gt;</span> (node <span class="ot">-&gt;</span> <span class="dt">Bool</span>) <span class="ot">-&gt;</span> <span class="dt">IO</span> [node] <span class="ot">-&gt;</span> <span class="dt">IO</span> [node]
<span class="ot">&gt;</span> rsearch succ goal ionodes <span class="fu">=</span> 
<span class="ot">&gt;</span>   <span class="kw">do</span> xs <span class="ot">&lt;-</span> ionodes 
<span class="ot">&gt;</span>      <span class="kw">if</span> null xs 
<span class="ot">&gt;</span>        <span class="kw">then</span> return []
<span class="ot">&gt;</span>        <span class="kw">else</span> 
<span class="ot">&gt;</span>          <span class="kw">if</span> goal (head xs) 
<span class="ot">&gt;</span>            <span class="kw">then</span> return [head xs]
<span class="ot">&gt;</span>            <span class="kw">else</span> <span class="kw">do</span> ys <span class="ot">&lt;-</span> rsearch succ goal (succ (head xs))
<span class="ot">&gt;</span>                    <span class="kw">if</span> (not <span class="fu">.</span> null) ys 
<span class="ot">&gt;</span>                       <span class="kw">then</span> return [head ys]
<span class="ot">&gt;</span>                       <span class="kw">else</span> <span class="kw">if</span> null (tail xs) <span class="kw">then</span> return []
<span class="ot">&gt;</span>                            <span class="kw">else</span> 
<span class="ot">&gt;</span>                              rsearch 
<span class="ot">&gt;</span>                                succ goal (return <span class="fu">$</span> tail xs)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; genRandomSudoku ::</span> <span class="dt">IO</span> <span class="dt">Node</span>
<span class="ot">&gt;</span> genRandomSudoku <span class="fu">=</span> <span class="kw">do</span> [r] <span class="ot">&lt;-</span> rsolveNs [emptyN]
<span class="ot">&gt;</span>                      return r</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> randomS <span class="fu">=</span> genRandomSudoku <span class="fu">&gt;&gt;=</span> showNode</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; uniqueSol ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> uniqueSol node <span class="fu">=</span> singleton (solveNs [node]) <span class="kw">where</span> 
<span class="ot">&gt;</span>   singleton [] <span class="fu">=</span> <span class="dt">False</span>
<span class="ot">&gt;</span>   singleton [x] <span class="fu">=</span> <span class="dt">True</span>
<span class="ot">&gt;</span>   singleton (x<span class="fu">:</span>y<span class="fu">:</span>zs) <span class="fu">=</span> <span class="dt">False</span></code></pre></div>
<p>Erase a position from a Sudoku.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; eraseS ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> <span class="dt">Sudoku</span>
<span class="ot">&gt;</span> eraseS s (r,c) (x,y) <span class="fu">|</span> (r,c) <span class="fu">==</span> (x,y) <span class="fu">=</span> <span class="dv">0</span>
<span class="ot">&gt;</span>                      <span class="fu">|</span> otherwise      <span class="fu">=</span> s (x,y)</code></pre></div>
<p>Erase a position from a Node.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; eraseN ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> (<span class="dt">Row</span>,<span class="dt">Column</span>) <span class="ot">-&gt;</span> <span class="dt">Node</span>
<span class="ot">&gt;</span> eraseN n (r,c) <span class="fu">=</span> (s, constraints s) 
<span class="ot">&gt;</span>   <span class="kw">where</span> s <span class="fu">=</span> eraseS (fst n) (r,c) </code></pre></div>
<p>Return a minimal node with a unique solution by erasing positions until the result becomes ambiguous.</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; minimalize ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> [(<span class="dt">Row</span>,<span class="dt">Column</span>)] <span class="ot">-&gt;</span> <span class="dt">Node</span>
<span class="ot">&gt;</span> minimalize n [] <span class="fu">=</span> n
<span class="ot">&gt;</span> minimalize n ((r,c)<span class="fu">:</span>rcs) <span class="fu">|</span> uniqueSol n' <span class="fu">=</span> minimalize n' rcs
<span class="ot">&gt;</span>                          <span class="fu">|</span> otherwise    <span class="fu">=</span> minimalize n  rcs
<span class="ot">&gt;</span>   <span class="kw">where</span> n' <span class="fu">=</span> eraseN n (r,c)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; filledPositions ::</span> <span class="dt">Sudoku</span> <span class="ot">-&gt;</span> [(<span class="dt">Row</span>,<span class="dt">Column</span>)]
<span class="ot">&gt;</span> filledPositions s <span class="fu">=</span> [ (r,c) <span class="fu">|</span> r <span class="ot">&lt;-</span> positions,  
<span class="ot">&gt;</span>                               c <span class="ot">&lt;-</span> positions, s (r,c) <span class="fu">/=</span> <span class="dv">0</span> ]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; genProblem ::</span> <span class="dt">Node</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">Node</span>
<span class="ot">&gt;</span> genProblem n <span class="fu">=</span> <span class="kw">do</span> ys <span class="ot">&lt;-</span> randomize xs
<span class="ot">&gt;</span>                   return (minimalize n ys)
<span class="ot">&gt;</span>    <span class="kw">where</span> xs <span class="fu">=</span> filledPositions (fst n)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; main ::</span> <span class="dt">IO</span> ()
<span class="ot">&gt;</span> main <span class="fu">=</span> <span class="kw">do</span> [r] <span class="ot">&lt;-</span> rsolveNs [emptyN]
<span class="ot">&gt;</span>           showNode r
<span class="ot">&gt;</span>           s  <span class="ot">&lt;-</span> genProblem r
<span class="ot">&gt;</span>           showNode s</code></pre></div>
<p>Example output from this:</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell">    <span class="fu">*</span><span class="dt">FSAlab3</span><span class="fu">&gt;</span> main
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">|</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">5</span> <span class="fu">|</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">1</span> <span class="fu">|</span> <span class="dv">4</span> <span class="dv">2</span> <span class="dv">3</span> <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">7</span> <span class="dv">4</span> <span class="dv">2</span> <span class="fu">|</span> <span class="dv">9</span> <span class="dv">5</span> <span class="dv">3</span> <span class="fu">|</span> <span class="dv">8</span> <span class="dv">6</span> <span class="dv">1</span> <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">6</span> <span class="dv">1</span> <span class="dv">3</span> <span class="fu">|</span> <span class="dv">2</span> <span class="dv">4</span> <span class="dv">8</span> <span class="fu">|</span> <span class="dv">9</span> <span class="dv">5</span> <span class="dv">7</span> <span class="fu">|</span>
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">|</span> <span class="dv">9</span> <span class="dv">2</span> <span class="dv">4</span> <span class="fu">|</span> <span class="dv">1</span> <span class="dv">3</span> <span class="dv">7</span> <span class="fu">|</span> <span class="dv">5</span> <span class="dv">8</span> <span class="dv">6</span> <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">5</span> <span class="dv">8</span> <span class="dv">7</span> <span class="fu">|</span> <span class="dv">4</span> <span class="dv">9</span> <span class="dv">6</span> <span class="fu">|</span> <span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span> <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">1</span> <span class="dv">3</span> <span class="dv">6</span> <span class="fu">|</span> <span class="dv">5</span> <span class="dv">8</span> <span class="dv">2</span> <span class="fu">|</span> <span class="dv">7</span> <span class="dv">9</span> <span class="dv">4</span> <span class="fu">|</span>
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">|</span> <span class="dv">2</span> <span class="dv">7</span> <span class="dv">1</span> <span class="fu">|</span> <span class="dv">8</span> <span class="dv">6</span> <span class="dv">9</span> <span class="fu">|</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">4</span> <span class="dv">6</span> <span class="dv">9</span> <span class="fu">|</span> <span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span> <span class="fu">|</span> <span class="dv">2</span> <span class="dv">7</span> <span class="dv">8</span> <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">8</span> <span class="fu">|</span> <span class="dv">7</span> <span class="dv">2</span> <span class="dv">4</span> <span class="fu">|</span> <span class="dv">6</span> <span class="dv">1</span> <span class="dv">9</span> <span class="fu">|</span>
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">|</span>     <span class="dv">5</span> <span class="fu">|</span>       <span class="fu">|</span>       <span class="fu">|</span>
    <span class="fu">|</span>   <span class="dv">4</span>   <span class="fu">|</span> <span class="dv">9</span>     <span class="fu">|</span>     <span class="dv">1</span> <span class="fu">|</span>
    <span class="fu">|</span>       <span class="fu">|</span> <span class="dv">2</span>   <span class="dv">8</span> <span class="fu">|</span>   <span class="dv">5</span> <span class="dv">7</span> <span class="fu">|</span>
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">|</span>       <span class="fu">|</span>   <span class="dv">3</span>   <span class="fu">|</span> <span class="dv">5</span> <span class="dv">8</span> <span class="dv">6</span> <span class="fu">|</span>
    <span class="fu">|</span>     <span class="dv">7</span> <span class="fu">|</span>   <span class="dv">9</span>   <span class="fu">|</span>   <span class="dv">3</span>   <span class="fu">|</span>
    <span class="fu">|</span>   <span class="dv">3</span>   <span class="fu">|</span>       <span class="fu">|</span>   <span class="dv">9</span>   <span class="fu">|</span>
    <span class="fu">+-------+-------+-------+</span>
    <span class="fu">|</span>       <span class="fu">|</span> <span class="dv">8</span>     <span class="fu">|</span> <span class="dv">3</span>     <span class="fu">|</span>
    <span class="fu">|</span> <span class="dv">4</span> <span class="dv">6</span>   <span class="fu">|</span>       <span class="fu">|</span>       <span class="fu">|</span>
    <span class="fu">|</span>   <span class="dv">5</span> <span class="dv">8</span> <span class="fu">|</span> <span class="dv">7</span>     <span class="fu">|</span>       <span class="fu">|</span>
    <span class="fu">+-------+-------+-------+</span></code></pre></div>
<hr>
<p><strong>Further Reading</strong></p>
<p>For further background, you might wish to read <span class="citation">(Rosenhouse and Taalman 2011)</span>. Information about counting methods for Sudokus can be found in <span class="citation">(Felgenhauer and Jarvis 2006)</span> and <span class="citation">(Russell and Jarvis 2006)</span>.</p>
<hr>
<p><strong>Exercises</strong></p>
<p>See <a href="http://homepages.cwi.nl/~jve/courses/15/testing/lab/Lab5.html">lab work</a> for this week.</p>
<hr>
<p><strong>Exercise (Bonus)</strong></p>
<p>Further constraints are possible. Let's investigate some. Let's say that a <em>crossed Sudoku</em> is a Sudoku satisfying the additional constraints that the values on the two diagonals are all different. Write a program that generates minimal problems for crossed Sudokus. How many hints do these problems contain, on average?</p>
<hr>
<p><strong>Exercise (Bonus)</strong></p>
<p>How about <em>crossed NRC Sudokus</em> or <em>NRCX Sudokus</em>: Sudokus satisfying both the NRC constraints and the diagonal constraints? Write a program that generates minimal problems for crossed NRC Sudokus. How many hints do these problems contain, on average? Can you generate examples with 9 hints? With less than 9 hints?</p>
<hr>
<p>Workshop this week on working with trees: <a href="http://homepages.cwi.nl/~jve/courses/15/testing/workshops/Workshop5.pdf">Workshop5.pdf</a>. Lab work this week: <a href="http://homepages.cwi.nl/~jve/courses/15/testing/lab/Lab5.html">Lab5.html</a>.</p>
<p>Back to <a href="http://homepages.cwi.nl/~jve/courses/15/testing/index.html">main course page</a>.</p>
<hr>
<div id="references" class="references">
<div id="ref-FelgenhauerJarvis2006:mos">
<p>Felgenhauer, Bertram, and Frazer Jarvis. 2006. “Mathematics of Sudoku I.”</p>
</div>
<div id="ref-RosenhouseTaalman2011:tss">
<p>Rosenhouse, Jason, and Laura Taalman. 2011. <em>Taking Sudoku Seriously: The Math Behind the World’s Most Popular Pencil Puzzle</em>. Oxford University Press.</p>
</div>
<div id="ref-RussellJarvis2006:mos">
<p>Russell, Ed, and Frazer Jarvis. 2006. “Mathematics of Sudoku II.”</p>
</div>
</div>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Math-italic, sans-serif;"></div></div></body></html>